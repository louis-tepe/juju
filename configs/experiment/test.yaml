# @package _global_
# Mode Test : Optimized for MacBook Pro M2 (16GB RAM)
# QWK Maximization: High resolution + Strong Augmentations + Huber Loss + Regression head

defaults:
  - override /model: efficientnet

# Data settings (QWK optimized)
data:
  image_size: 380 # Higher resolution for retinal details
  batch_size: 16 # Reduced for larger images on M2 16GB
  use_ben_graham: true
  use_native_augment: false # Disabled - using Albumentations instead
  use_strong_augment: true # Enable Albumentations-based augmentations
  use_cache: false # Disable cache for larger images
  use_mixup: false # Disabled for regression mode

# Model
model:
  backbone: "efficientnet_b0"
  dropout: 0.4 # Increased dropout for regularization
  output_type: "regression" # For threshold optimization

# QWK-optimized training (based on top APTOS 2019 solutions)
train:
  epochs: 3 # TEMP: Fast check
  warmup_epochs: 1 # TEMP: Fast check
  lr: 2e-4 # Standard LR from top solutions (was 3e-4)
  finetune_lr: 2e-5 # 10x lower for fine-tuning
  patience: 7 # Reduced for faster feedback (was 10)
  huber_delta: 0.5 # Huber loss delta - more robust to outliers
  label_smoothing: 0.0 # Not used with regression
  fold: 0
  use_mixed_precision: false
  use_xla: false
  force_cpu: false
  min_lr: 1e-7
  use_cosine_decay: true # Cosine annealing
  use_tta: true # Test-time augmentation
  tta_augments: 8
